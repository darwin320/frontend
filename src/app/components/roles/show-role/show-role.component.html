<div class="h-100 d-flex flex-column">
    <app-main-navbar></app-main-navbar>

    <app-loader class="h-100" *ngIf="!role"></app-loader>

    <div *ngIf="role">
        <h2 class="text-700 text-center">Usuario</h2>
        <h6 class="text-600 text-center border-bottom pb-3">
            {{ role.name }}
        </h6>

        <div class="container">
            <div class="row">
                <div class="col-12 col-sm-6">
                    <div class="form-floating mb-2 m-sm-0 border rounded">
                        <input
                            type="text"
                            readonly
                            class="form-control-plaintext"
                            [value]="role.name"
                        />
                        <label>Nombre</label>
                    </div>
                </div>
            </div>

            <div class="mb-5">
                <h3 class="text-500 mt-3">Permisos</h3>
                <div class="text-center mb-2">
                    <button
                        class="btn btn-primary mx-auto"
                        (click)="updateRolePermissions()"
                    >
                        <i class="bi bi-pen"></i>
                        Actualizar permisos
                    </button>
                </div>
                <div
                    *ngFor="let permission of role.apisOnRoles"
                    class="rounded border py-1 px-3 mb-2"
                >
                    {{ permission.api.name }}
                    <div
                        class="d-flex flex-wrap flex-row justify-content-evenly"
                    >
                        <div class="form-check form-switch">
                            <input
                                class="form-check-input"
                                type="checkbox"
                                role="switch"
                                [(ngModel)]="permission.get"
                            />
                            <label class="form-check-label"> GET </label>
                        </div>
                        <div class="form-check form-switch">
                            <input
                                class="form-check-input"
                                type="checkbox"
                                role="switch"
                                [(ngModel)]="permission.post"
                            />
                            <label class="form-check-label"> POST </label>
                        </div>
                        <div class="form-check form-switch">
                            <input
                                class="form-check-input"
                                type="checkbox"
                                role="switch"
                                [(ngModel)]="permission.delete"
                            />
                            <label class="form-check-label"> DELETE </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
